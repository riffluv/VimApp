"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[871],{4871:function(e,t,r){r.r(t);var o=r(7437),a=r(8959),n=r(42),i=r(8608),l=r(4131),s=r(3441),c=r(607),d=r(2040),p=r(2801),h=r(7104),m=r(742),u=r(800),b=r(1583),g=r(7924),x=r(4963),f=r(7037),y=r(7608),v=r(3331),w=r(4446),j=r(2265),k=r(7476);let S=v.E.create(a.x),C=v.E.create(n.k),_=v.E.create(i.x),z=g.$f.of([{key:"Ctrl-e",run:x.hs},{key:"Cmd-e",run:x.hs}]),K={html:{autocompleteTab:!0,config:{markup:{options:{"markup.attributes":{href:"https://",src:"/"}}}}},css:{autocompleteTab:!0,config:{stylesheet:{options:{"stylesheet.strictMatch":!0}}}}},M={html:(0,h.dy)(),css:(0,p.iv)(),js:(0,m.eJ)()},I=e=>{let t=[M[e],(0,d.m8)(),(0,f.dV)(),z,b.vk];if("html"===e||"css"===e){let t=u.Wl.high((0,x.MU)(K[e]));return[M[e],(0,d.m8)(),t,(0,f.dV)(),z,b.vk]}return t},P={hidden:{opacity:0,scale:.98},visible:{opacity:1,scale:1,transition:{duration:.4}}},R={hidden:{opacity:0,x:-15,scale:.9},visible:{opacity:1,x:0,scale:1,transition:{duration:.3}},exit:{opacity:0,x:15,scale:.9,transition:{duration:.2}}},W={html:"",css:"",js:""},U={normal:{text:"NORMAL",color:"orange.400",icon:k.zv2,hint:"Press i to enter insert mode"},insert:{text:"INSERT",color:"green.400",icon:k.vPQ,hint:"Press Esc to return to normal mode"},visual:{text:"VISUAL",color:"purple.400",icon:k.zv2,hint:"Select text with h,j,k,l or use y to copy"}};t.default=function(e){let{onCodePenModeChange:t}=e,[r,d]=(0,j.useState)("html"),[p,h]=(0,j.useState)("normal"),[m,u]=(0,j.useState)(!1),[g,x]=(0,j.useState)(!1),[v,z]=(0,j.useState)(W);(0,j.useEffect)(()=>{try{let e=localStorage.getItem("vimapp_shared_docs");if(e){z(JSON.parse(e));return}localStorage.removeItem("vimapp_samples"),localStorage.removeItem("vimapp_codepen_samples"),z(W)}catch(e){console.warn("Failed to load saved docs from localStorage:",e),z(W)}},[]);let K=(0,j.useMemo)(()=>I("html"),[]),M=(0,j.useMemo)(()=>I("css"),[]),E=(0,j.useMemo)(()=>I("js"),[]);(0,j.useCallback)(()=>{switch(r){case"html":default:return K;case"css":return M;case"js":return E}},[r,K,M,E]);let N=(0,j.useCallback)(e=>e.split("\n").filter(e=>!e.trim().startsWith("//")).join("\n"),[]),O=(0,j.useMemo)(()=>({html:N(v.html),css:N(v.css),js:N(v.js)}),[v,N]),Y=(0,j.useCallback)(e=>{try{localStorage.setItem("vimapp_shared_docs",JSON.stringify(e))}catch(e){console.warn("Failed to save docs to localStorage:",e)}},[]),F=(0,j.useCallback)(e=>{u(!1),h("normal"),d(e)},[]),H=(0,j.useCallback)(()=>{x(e=>{let r=!e;return null==t||t(r),r}),u(!1)},[t]),B=(0,j.useCallback)(e=>{try{let o="normal";if(null==e?void 0:e.view){var t,r;let a=(0,f.rd)(e.view);if(null==a?void 0:null===(r=a.state)||void 0===r?void 0:null===(t=r.vim)||void 0===t?void 0:t.mode)switch(a.state.vim.mode){case"insert":o="insert";break;case"visual":o="visual";break;default:o="normal"}}h(o)}catch(e){console.warn("Error updating vim mode:",e),h("normal")}},[]),G=(0,j.useCallback)(()=>{z(e=>{let t={...e,[r]:""};return Y(t),t}),h("normal")},[r,Y]),J=(0,j.useCallback)(()=>{z(W),Y(W),h("normal")},[Y]),T=(0,j.useMemo)(()=>{let e=N(v.html);return'<!DOCTYPE html>\n<html lang="ja">\n<head>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n  <title>Preview</title>\n  <style>'.concat(v.css,"</style>\n</head>\n<body>\n  ").concat(e,"\n  <script>").concat(v.js,"</script>\n</body>\n</html>")},[v.css,v.html,v.js,N]),V=(0,j.useMemo)(()=>'<!DOCTYPE html>\n<html lang="ja">\n<head>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n  <title>CodePen Preview</title>\n  <style>'.concat(O.css,"</style>\n</head>\n<body>\n  ").concat(O.html,"\n  <script>").concat(O.js,"</script>\n</body>\n</html>"),[O]),A=(0,j.useCallback)(()=>{u(e=>!e)},[]);return(0,o.jsxs)(S,{bgGradient:"gradient.primary",color:"text.primary",p:{base:2,md:4},borderRadius:"2xl",boxShadow:"glass",display:"flex",flexDirection:"column",borderWidth:1,borderColor:"border.primary",position:"relative",overflow:"hidden",flex:1,minH:{base:"400px",md:"520px",lg:"600px"},maxH:{base:"520px",md:"640px",lg:"700px"},h:{base:"440px",md:"600px",lg:"680px"},initial:"hidden",animate:"visible",variants:P,_before:{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"gradient.glass",borderRadius:"inherit",pointerEvents:"none"},_hover:{boxShadow:"glass-hover",transform:"translateY(-1px)"},children:[(0,o.jsxs)(C,{alignItems:"center",px:[2,4],py:[2,3],borderBottomWidth:1,borderColor:"primary.700",bgGradient:"linear(to-r, primary.900, primary.800)",justifyContent:"space-between",position:"relative",_before:{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(90deg, rgba(255,152,0,0.08) 0%, transparent 50%, rgba(255,152,0,0.03) 100%)",pointerEvents:"none"},children:[(0,o.jsxs)(n.k,{alignItems:"center",children:[(0,o.jsxs)(l.U,{gap:2,marginRight:5,children:[(0,o.jsx)(a.x,{w:3,h:3,borderRadius:"full",bg:"red.400"}),(0,o.jsx)(a.x,{w:3,h:3,borderRadius:"full",bg:"yellow.400"}),(0,o.jsx)(a.x,{w:3,h:3,borderRadius:"full",bg:"green.400"})]}),(0,o.jsxs)(n.k,{alignItems:"center",children:[(0,o.jsx)(s.J,{as:k.cDN,color:"secondary.400",mr:2}),(0,o.jsxs)(_,{fontFamily:"mono",fontWeight:"medium",letterSpacing:"tight",color:"white",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[r.toUpperCase()," Editor"]},r)]})]}),(0,o.jsxs)(l.U,{justifyContent:"flex-end",gap:2,children:[(0,o.jsxs)(c.z,{onClick:H,colorScheme:g?"teal":"gray",bg:g?"linear-gradient(135deg, rgba(56,178,172,0.2), rgba(56,178,172,0.1))":"transparent",color:g?"teal.400":"gray.400",borderRadius:"md",px:3,py:1.5,height:"auto",fontFamily:"mono",fontWeight:g?"bold":"medium",letterSpacing:"tight",borderWidth:g?1:0,borderColor:g?"teal.800":"transparent",_hover:{bg:"linear-gradient(135deg, rgba(56,178,172,0.3), rgba(56,178,172,0.15))",color:"teal.400",transform:"translateY(-1px)",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},_active:{bg:"blackAlpha.500",transform:"translateY(0)"},_focus:{outline:"none"},_focusVisible:{outline:"none"},transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",mr:1,"aria-label":"CodePenモード切り替え","aria-pressed":g,children:[(0,o.jsx)(s.J,{as:k.hbr,mr:1})," CodePen"]}),(0,o.jsx)(c.z,{onClick:A,disabled:g,colorScheme:m?"purple":"gray",bg:m?"linear-gradient(135deg, rgba(128,90,213,0.2), rgba(128,90,213,0.1))":"transparent",color:m?"purple.400":"gray.400",borderRadius:"md",px:3,py:1.5,height:"auto",fontFamily:"mono",fontWeight:m?"bold":"medium",letterSpacing:"tight",borderWidth:m?1:0,borderColor:m?"purple.800":"transparent",_hover:{bg:g?"transparent":"linear-gradient(135deg, rgba(128,90,213,0.3), rgba(128,90,213,0.15))",color:g?"gray.400":"purple.400",transform:g?"none":"translateY(-1px)",boxShadow:g?"none":"0 4px 8px rgba(0,0,0,0.3)"},_active:{bg:"blackAlpha.500",transform:"translateY(0)"},_focus:{outline:"none"},_focusVisible:{outline:"none"},transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",mr:1,"aria-label":"プレビュー表示切り替え","aria-pressed":m,opacity:g?.5:1,children:"Preview"}),["html","css","js"].map(e=>(0,o.jsx)(c.z,{onClick:()=>F(e),colorScheme:r===e?"orange":"gray",bg:r===e?"linear-gradient(135deg, rgba(255,152,0,0.2), rgba(255,152,0,0.1))":"transparent",color:r===e?"secondary.400":"gray.400",borderRadius:"md",px:3,py:1.5,height:"auto",fontFamily:"mono",fontWeight:r===e?"bold":"medium",letterSpacing:"tight",borderWidth:r===e?1:0,borderColor:r===e?"secondary.800":"transparent",_hover:{bg:r===e?"linear-gradient(135deg, rgba(255,152,0,0.3), rgba(255,152,0,0.15))":"blackAlpha.300",color:"secondary.400",transform:"translateY(-1px)",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},_active:{bg:"blackAlpha.500",transform:"translateY(0)"},_focus:{outline:"none",boxShadow:"none"},_focusVisible:{outline:"2px solid",outlineColor:"secondary.400",outlineOffset:"2px",boxShadow:"0 0 0 2px rgba(255,152,0,0.3)",borderColor:r===e?"secondary.800":"transparent"},transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",mr:1,"aria-label":"".concat(e.toUpperCase(),"エディターモードに切り替え"),"aria-pressed":r===e,children:e.toUpperCase()},e)),(0,o.jsxs)(c.z,{onClick:G,colorScheme:"gray",bg:"transparent",color:"gray.400",borderRadius:"md",px:3,py:1.5,height:"auto",fontFamily:"mono",fontWeight:"medium",letterSpacing:"tight",borderWidth:0,position:"relative",_hover:{bg:"linear-gradient(135deg, rgba(128,90,213,0.2), rgba(128,90,213,0.1))",color:"purple.400",transform:"translateY(-1px)",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},_active:{bg:"linear-gradient(135deg, rgba(128,90,213,0.3), rgba(128,90,213,0.2))",color:"purple.500",transform:"translateY(2px)",boxShadow:"0 1px 2px rgba(0,0,0,0.5) inset",_after:{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"md",background:"rgba(0,0,0,0.1)"}},_focus:{outline:"none"},_focusVisible:{outline:"2px solid",outlineColor:"purple.400",outlineOffset:"2px"},transition:"all 0.12s cubic-bezier(0.2, 0, 0.1, 1)",ml:2,"aria-label":"エディターの内容をリセット",children:[(0,o.jsx)(s.J,{as:k.Bw1,mr:1,transition:"transform 0.2s ease",_groupHover:{transform:"rotate(30deg)"}})," ","Reset"]})]})]}),(0,o.jsxs)(C,{position:"absolute",bottom:0,left:0,right:0,px:4,py:1.5,bg:"linear-gradient(135deg, rgba(0,0,0,0.8), rgba(0,0,0,0.6))",borderTopWidth:1,borderColor:"primary.700",zIndex:5,fontSize:"sm",fontFamily:"mono",justifyContent:"space-between",alignItems:"center",backdropFilter:"blur(10px)",_before:{content:'""',position:"absolute",top:0,left:0,right:0,height:"1px",background:"linear-gradient(90deg, transparent, ".concat(U[p].color,", transparent)"),opacity:.6},children:[(0,o.jsx)(w.M,{mode:"wait",children:(0,o.jsxs)(C,{alignItems:"center",variants:R,initial:"hidden",animate:"visible",exit:"exit",children:[(0,o.jsx)(s.J,{as:U[p].icon,color:U[p].color,mr:2}),(0,o.jsx)(_,{color:U[p].color,fontWeight:"medium",fontSize:"sm",textShadow:"0 0 8px ".concat(U[p].color,"40"),children:U[p].text})]},p)}),(0,o.jsxs)(n.k,{alignItems:"center",gap:3,children:[(0,o.jsx)(i.x,{color:"gray.500",fontSize:"xs",children:U[p].hint}),!m&&(0,o.jsx)(c.z,{onClick:J,colorScheme:"red",variant:"ghost",size:"xs",height:"20px",width:"20px",p:0,minW:"auto",borderRadius:"full",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",_hover:{bg:"rgba(255,100,100,0.2)",color:"red.300"},_active:{bg:"rgba(255,100,100,0.3)",transform:"scale(0.9)"},title:"全エディターリセット","aria-label":"すべてのエディターの内容をリセット",children:(0,o.jsx)(s.J,{as:k.Bw1,boxSize:"12px"})})]})]}),(0,o.jsx)(a.x,{flex:1,minHeight:0,borderRadius:"lg",overflow:"hidden",width:"100%",display:"flex",position:"relative",mb:8,height:"100%",maxH:"100%",justifyContent:"center",children:g?(0,o.jsxs)(n.k,{w:"100%",h:"100%",direction:{base:"column",lg:"row"},gap:2,children:[(0,o.jsx)(a.x,{flex:1,minH:{base:"200px",lg:"auto"},borderRadius:"md",bg:"white",boxShadow:"lg",overflow:"hidden",children:(0,o.jsx)("iframe",{title:"CodePen Preview",srcDoc:V,style:{width:"100%",height:"100%",border:"none",background:"white"},sandbox:"allow-scripts allow-same-origin allow-modals"})}),(0,o.jsxs)(a.x,{flex:1,minH:{base:"200px",lg:"auto"},borderRadius:"md",bg:"transparent",overflow:"hidden",children:["html"===r&&(0,o.jsx)(y.ZP,{value:v.html,height:"100%",extensions:K,theme:b.vk,onChange:e=>{z(t=>{let r={...t,html:e};return Y(r),r})},onUpdate:B,basicSetup:{lineNumbers:!0,foldGutter:!0,dropCursor:!1,allowMultipleSelections:!1,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0},style:{height:"100%",fontSize:"16px",background:"transparent"}},"html-editor-codepen"),"css"===r&&(0,o.jsx)(y.ZP,{value:v.css,height:"100%",extensions:M,theme:b.vk,onChange:e=>{z(t=>{let r={...t,css:e};return Y(r),r})},onUpdate:B,basicSetup:{lineNumbers:!0,foldGutter:!0,dropCursor:!1,allowMultipleSelections:!1,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0},style:{height:"100%",fontSize:"16px",background:"transparent"}},"css-editor-codepen"),"js"===r&&(0,o.jsx)(y.ZP,{value:v.js,height:"100%",extensions:E,theme:b.vk,onChange:e=>{z(t=>{let r={...t,js:e};return Y(r),r})},onUpdate:B,basicSetup:{lineNumbers:!0,foldGutter:!0,dropCursor:!1,allowMultipleSelections:!1,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0},style:{height:"100%",fontSize:"16px",background:"transparent"}},"js-editor-codepen")]})]}):(0,o.jsxs)(o.Fragment,{children:[!m&&(0,o.jsxs)(a.x,{w:"100%",h:"100%",maxH:{base:"340px",md:"480px",lg:"560px"},minH:{base:"220px",md:"320px"},overflowY:"auto",borderRadius:"md",bg:"transparent",boxShadow:"none",style:{height:"100%",fontSize:"16px",outline:"none"},children:["html"===r&&(0,o.jsx)(y.ZP,{value:v.html,height:"100%",extensions:K,theme:b.vk,onChange:e=>{z(t=>{let r={...t,html:e};return Y(r),r})},onUpdate:B,basicSetup:{lineNumbers:!0,foldGutter:!0,dropCursor:!1,allowMultipleSelections:!1,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0},style:{height:"100%",fontSize:"16px",background:"transparent"}},"html-editor"),"css"===r&&(0,o.jsx)(y.ZP,{value:v.css,height:"100%",extensions:M,theme:b.vk,onChange:e=>{z(t=>{let r={...t,css:e};return Y(r),r})},onUpdate:B,basicSetup:{lineNumbers:!0,foldGutter:!0,dropCursor:!1,allowMultipleSelections:!1,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0},style:{height:"100%",fontSize:"16px",background:"transparent"}},"css-editor"),"js"===r&&(0,o.jsx)(y.ZP,{value:v.js,height:"100%",extensions:E,theme:b.vk,onChange:e=>{z(t=>{let r={...t,js:e};return Y(r),r})},onUpdate:B,basicSetup:{lineNumbers:!0,foldGutter:!0,dropCursor:!1,allowMultipleSelections:!1,indentOnInput:!0,bracketMatching:!0,closeBrackets:!0,autocompletion:!0,searchKeymap:!0,historyKeymap:!0,foldKeymap:!0,completionKeymap:!0},style:{height:"100%",fontSize:"16px",background:"transparent"}},"js-editor")]}),m&&(0,o.jsx)(a.x,{w:"100%",h:"100%",maxH:{base:"340px",md:"480px",lg:"560px"},minH:{base:"220px",md:"320px"},overflowY:"auto",borderRadius:"md",bg:"white",boxShadow:"xl",position:"relative",children:(0,o.jsx)("iframe",{title:"Preview",srcDoc:T,style:{width:"100%",height:"100%",border:"none",background:"white"},sandbox:"allow-scripts allow-same-origin allow-modals"})})]})})]})}}}]);