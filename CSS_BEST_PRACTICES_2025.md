# CSS ベストプラクティス 2025 (vimapp プロジェクト)

このドキュメントは、`vimapp`プロジェクトにおける CSS/スタイリングのコーディング規約とベストプラクティスを定義します。
一貫性、メンテナンス性、パフォーマンス、アクセシビリティを高く保つことを目的とします。

## 1. 基本方針：Chakra UI Props を徹底活用

当プロジェクトでは、UI の構築に **Chakra UI** を全面的に採用します。
CSS の記述は、原則として Chakra UI が提供する**スタイル Props**を通じて行い、`globals.css` には最低限のリセット・ベーススタイルのみを記述します。

**[OK] 正しい例:**

```jsx
<Box bg="teal.500" p={4} color="white">
  Hello World
</Box>
```

**[NG] 避けるべき例:**

```jsx
// globals.css や style属性、HEX/px/マジックナンバーでの直接指定は避ける
<div style={{ backgroundColor: "#38B2AC", padding: "16px", color: "white" }}>
  Hello World
</div>
```

**理由:**

- Chakra UI のデザインシステム（カラースキーム、スペーシング、タイポグラフィ）に準拠することで、デザインの一貫性が自動的に保たれます。
- レスポンシブ対応やダークモード対応が容易になります。
- コードの可読性が向上します。

## 2. レスポンシブデザイン

レスポンシブデザインは、Chakra UI の**配列（Array）またはオブジェクト（Object）構文**を使用して実装します。

- **配列構文:** `[mobile, tablet, desktop]` の順で値を指定します。
- **オブジェクト構文:** `{{ base: '...', md: '...', lg: '...' }}` のように、ブレークポイントを明示的に指定します。

**[OK] 正しい例:**

```jsx
// 画面幅が広がるにつれて、paddingが大きくなる
<Box p={{ base: 2, md: 4, lg: 8 }}>
  Responsive Padding
</Box>

// 画面幅が狭い時は縦並び、広い時は横並び
<Flex direction={{ base: "column", lg: "row" }}>
  ...
</Flex>
```

## 3. スタイルの優先順位

1.  **Chakra UI スタイル Props:** (例: `bg`, `p`, `m`, `color`) を最優先で使用します。
2.  **`sx` Prop:** Chakra UI の Props で表現できない複雑なスタイル（例: スクロールバーのカスタマイズ等）が必要な場合のみ、`sx` Prop を使用します。
3.  **`globals.css`:** アプリケーション全体で共通の、ごく基本的なスタイル（例: `body`のフォントファミリー、リセット CSS）のみを記述します。コンポーネント固有のスタイルは**絶対に**記述しません。
4.  **Tailwind CSS クラス:** `className` 属性での Tailwind CSS の直接利用は、Chakra UI のシステムと競合するため**禁止**します（Google Fonts 等のクラス適用は除く）。

## 4. テーマとデザイントークン・マジックナンバー禁止

- **色:** カラーパレットは Chakra UI のデフォルトテーマ、または将来的に拡張するカスタムテーマで管理します。`red.500` や `gray.800` のように、テーマで定義された名前で色を指定し、HEX コード (`#FF0000`) のハードコーディングは**禁止**です。
- **スペーシング:** `p={4}` や `gap={6}` のように、テーマで定義されたスペーシングスケールを使用します。`p="15px"` のようなマジックナンバーは**禁止**です。
- **フォントサイズ:** `fontSize="lg"` のように、テーマで定義されたタイポグラフィスケールを使用します。

## 5. コンポーネントの責務

- スタイルは、そのスタイルが適用されるコンポーネント内で完結させます。
- 親コンポーネントが子コンポーネントの内部スタイルを上書きするような実装は、予期せぬ競合の原因となるため避けてください。

---

**このガイドラインは、今後のすべての UI 実装とレビューの基準となります。**

---

## 6. 使用を避けるべき技術

### 6.1. インラインスタイル (`style={...}`)・`sx` の利用

`style`属性や`css`プロパティによるインラインスタイルの使用は、動的に計算された値（例: `transform: translateX(${value}px)`) を適用するなど、やむを得ない場合を除き**原則禁止**とします。

`sx`プロパティも、Chakra UI Props で表現できない場合（例: スクロールバーのカスタマイズ等）に限り、最小限の利用に留めてください。

**ただし、外部ライブラリのラッパー（例: CodeMirror, サードパーティ製エディタ等）で Chakra UI の Props で完全にスタイル制御できない場合は、必要最小限の style 属性利用を許容します。**

**理由:** Chakra UI のテーマ（デザイントークン、レスポンシブ対応、疑似セレクタ）が適用できず、デザインの一貫性を損なうためです。常に Chakra UI のスタイル Props を優先してください。

### 6.2. BEM (Block Element Modifier)・Tailwind CSS

BEM は、CSS クラスの命名規則であり、当プロジェクトのスタイリングアプローチとは異なるため**使用しません**。

Tailwind CSS のクラスも Chakra UI の Props/テーマと競合するため**使用禁止**です（Google Fonts 等のクラス適用は除く）。

**理由:** Chakra UI はコンポーネント単位でスタイルを管理する CSS-in-JS のアプローチです。BEM や Tailwind が解決しようとするグローバルな CSS クラス名の衝突や管理の問題は、このアプローチでは発生しません。私たちは CSS クラス名ではなく、React コンポーネントの Props によってスタイルを記述します。
